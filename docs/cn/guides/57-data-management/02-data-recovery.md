---
title: Databend Cloud 中的数据恢复
sidebar_label: 数据恢复
---

本主题解释了如何使用 Databend Cloud 恢复更改或删除的数据。

## 时间旅行：轻松访问过去的数据 {/*time-travel-easy-access-to-past-data*/}

通过 Databend 时间旅行，即使数据已经被修改或删除，您也可以回溯并检索过去的数据。它非常适用于：

- **找回已删除的数据：** 帮助您找回不小心或故意删除的重要内容，如表格、数据库等。

- **复制和保存过去的数据：** 允许您复制并保存早期的重要数据。

- **查看过去的数据使用情况：** 便于查看数据在特定时间的使用或变更情况。

### 时间旅行的主要用途 {/*main-uses-of-time-travel*/}

- **访问过去的数据：** 查看过去的数据，即使它已经被更改或删除。
- **恢复丢失的数据：** 恢复被删除的表格和数据库。

### 时间旅行 SQL 扩展 {/*time-travel-sql-extensions*/}

- **时间旅行的 SQL 扩展：** 在 SELECT 语句和 CREATE 命令中使用特殊的 SQL 子句，如 [`AT`](/sql/sql-commands/query-syntax/query-at)，以指定您想要访问的历史时间点。
- **恢复已删除的数据：** 使用 `UNDROP` 命令恢复表格、数据库。

### 设置数据保留期限 {/*setting-the-data-retention-period*/}

- **标准版：** 可以选择无保留（0天）或默认的 **1天**。
- **企业版及更高版本：**
  - 对于临时数据：设置为 0 或默认的 **1天**。
  - 对于永久数据：可以选择从 **0至90天** 的任何期限。

:::info 注意

设置保留期限为0天意味着该数据将不可用时间旅行功能。

:::

### 调整数据保留时间 {/*adjusting-data-retention-time*/}

通过 `DATA_RETENTION_TIME_IN_DAYS` 设置更改数据保留时间，通常为1天。这决定了保留旧数据的时间长短。

## 故障安全：为您的数据提供额外保护 {/*fail-safe-extra-protection-for-your-data*/}

Databend Cloud 中的故障安全是一项额外的安全功能，与时间旅行不同。它旨在保护您的数据免受系统问题或安全事件的影响。

### 故障安全的工作原理 {/*how-fail-safe-works*/}

故障安全在时间旅行期限结束后提供固定的7天恢复窗口。

故障安全包括：

- **元数据恢复：** 使用元服务中的版本控制来恢复已删除的表格。
- **数据恢复：** 利用 AWS S3 的版本控制来保存已更改或删除的数据。

:::caution 注意

- 故障安全是 Databend Cloud 提供的紧急服务，不可由用户配置。
- 它应仅在其他恢复方法无效时使用。
- 不适用于常规的历史数据访问，超出时间旅行期限。
- 用于在出现重大问题后恢复数据，您无法自行设置。
- 恢复时间可能从几小时到几天不等，具体取决于情况。

:::